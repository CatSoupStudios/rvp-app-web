---
// src/layouts/Layout.astro
import "../styles/global.css";

interface Props {
  title?: string;
  description?: string;
  image?: string;
}

const {
  title = "Rangel Valley Painting | Premium Works in Bakersfield, CA",
  description = "Expert residential and commercial painting in Bakersfield. Specializing in cabinet refinishing, interiors, and luxury exterior transformations.",
  image = "https://res.cloudinary.com/dlh3rtxxm/image/upload/v1763851619/logo-rvp_dwkycu.png",
} = Astro.props;

// URL can√≥nica para evitar contenido duplicado
const canonicalURL = new URL(Astro.url.pathname, Astro.site);

// DATOS ESTRUCTURADOS (JSON-LD) PARA GOOGLE MAPS/LOCAL SEO
const schema = JSON.stringify({
  "@context": "https://schema.org",
  "@type": "HousePainter",
  name: "Rangel Valley Painting",
  image: "https://www.rangelvalleypainting.com/logo.png",
  "@id": "https://www.rangelvalleypainting.com",
  url: "https://www.rangelvalleypainting.com",
  telephone: "+16614286638",
  email: "info@rangelvalleypainting.com",
  priceRange: "$$",
  address: {
    "@type": "PostalAddress",
    addressLocality: "Bakersfield",
    addressRegion: "CA",
    addressCountry: "US",
  },
  geo: {
    "@type": "GeoCoordinates",
    latitude: 35.3733,
    longitude: -119.0187,
  },
  areaServed: [
    { "@type": "City", name: "Bakersfield" },
    { "@type": "City", name: "Seven Oaks" },
    { "@type": "City", name: "Stockdale Estates" },
    { "@type": "City", name: "Tehachapi" },
    { "@type": "City", name: "California City" },
  ],
  openingHoursSpecification: {
    "@type": "OpeningHoursSpecification",
    dayOfWeek: [
      "Monday",
      "Tuesday",
      "Wednesday",
      "Thursday",
      "Friday",
      "Saturday",
    ],
    opens: "08:00",
    closes: "18:00",
  },
  sameAs: [
    "https://www.facebook.com/rangelvalleypaintinginc",
    "https://www.instagram.com/rangelvalleypainting/",
  ],
});
---

<!doctype html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=5"
    />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <meta name="generator" content={Astro.generator} />
    <meta
      name="google-site-verification"
      content="sv4FkBbco20IYERUoVJ43xieJoDijqsWACDwtV-t5cM"
    />

    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={canonicalURL} />
    <meta
      name="keywords"
      content="Painters Bakersfield, House Painting Kern County, Cabinet Refinishing, Rangel Valley Painting, Exterior Painting, Interior Painters, Seven Oaks Painters, Luxury Painting"
    />
    <meta name="author" content="Rangel Valley Painting" />

    <meta name="geo.region" content="US-CA" />
    <meta name="geo.placename" content="Bakersfield" />
    <meta name="geo.position" content="35.3733;-119.0187" />
    <meta name="ICBM" content="35.3733, -119.0187" />

    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:image" content={new URL(image, Astro.site)} />
    <meta property="og:site_name" content="Rangel Valley Painting" />
    <meta property="og:locale" content="en_US" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={new URL(image, Astro.site)} />

    <script type="application/ld+json" set:html={schema} />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  </head>

  <body
    class="antialiased selection:bg-[#C6AC8F] selection:text-[#22333B] bg-[var(--brand-bg)] overflow-x-hidden w-full"
  >
    <slot />
  </body>
</html>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const sections = document.querySelectorAll("section:not(#home), footer");
    const observerOptions = {
      root: null,
      threshold: 0.1,
      rootMargin: "0px 0px -50px 0px",
    };
    const observer = new IntersectionObserver((entries, observer) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          window.requestAnimationFrame(() => {
            entry.target.classList.add("is-visible");
          });
          observer.unobserve(entry.target);
        }
      });
    }, observerOptions);
    sections.forEach((section) => {
      section.classList.add("reveal-section");
      observer.observe(section);
    });
  });
</script>

<style is:global>
  section {
    transform: translateZ(0);
    will-change: transform, opacity;
    backface-visibility: hidden;
  }
  .reveal-section {
    opacity: 0;
    transform: translateY(40px);
    transition:
      opacity 0.8s ease-out,
      transform 0.8s ease-out;
  }
  .reveal-section.is-visible {
    opacity: 1;
    transform: translateY(0);
  }
  @media (max-width: 768px) {
    .reveal-section {
      transform: translateY(20px);
      transition-duration: 0.6s;
    }
  }
  @media (prefers-reduced-motion: reduce) {
    .reveal-section {
      transition: none !important;
      opacity: 1 !important;
      transform: none !important;
    }
  }
</style>
